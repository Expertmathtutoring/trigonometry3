<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéØ Trigonometry Game</title>
<style>
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    background: linear-gradient(135deg, #c2e9fb, #a1c4fd);
    text-align: center;
    padding: 20px;
  }
  #game-container {
    background: white;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    max-width: 600px;
    margin: auto;
  }
  canvas { background: #f9f9f9; margin: 20px auto; display: block; border: 2px solid #333; }
  input { padding: 10px; width: 80%; margin: 10px 0; font-size: 1em; }
  button { padding: 10px 20px; margin: 10px; border: none; border-radius: 10px; background: #4caf50; color: white; cursor: pointer; font-size: 1em; }
  button:hover { background: #45a049; }
  .symbols { margin: 15px 0; }
  .symbol {
    display: inline-block;
    background: #eee;
    padding: 8px 12px;
    margin: 5px;
    border-radius: 8px;
    cursor: grab;
    font-size: 1.2em;
    user-select: none;
  }
</style>
</head>
<body>

<div id="game-container">
  <h2>üéØ Trigonometry Practice</h2>
  <canvas id="triangleCanvas" width="300" height="300"></canvas>
  <p id="question"></p>
  <div class="symbols">
    <div class="symbol" draggable="true">sin‚Åª¬π</div>
    <div class="symbol" draggable="true">cos‚Åª¬π</div>
    <div class="symbol" draggable="true">tan‚Åª¬π</div>
    <div class="symbol" draggable="true">‚àö</div>
  </div>
  <input type="text" id="answer" placeholder="Type or drag symbols here">
  <br>
  <button onclick="checkAnswer()">Submit</button>
  <button onclick="nextQuestion()">Next</button>
  <p id="feedback"></p>
</div>

<script>
let correctAnswer = "";
let acceptedForms = [];

function toSurd(n) {
  const root = Math.sqrt(n);
  if (Number.isInteger(root)) {
    return root.toString();
  }
  return `‚àö(${n})`;
}

function generateQuestion() {
  const a = Math.floor(Math.random() * 6) + 3; // opposite
  const b = Math.floor(Math.random() * 6) + 4; // adjacent
  const hypSquared = a*a + b*b;
  const c = toSurd(hypSquared);

  drawTriangle(a, b, c);

  document.getElementById("question").textContent =
    `Find Œ∏ using trig ratios.`;

  // correct forms: tan‚Åª¬π, sin‚Åª¬π, cos‚Åª¬π and ratios
  acceptedForms = [
    `tan‚Åª¬π(${a}/${b})`,
    `sin‚Åª¬π(${a}/${c})`,
    `cos‚Åª¬π(${b}/${c})`,
    `${a}/${c}`,  // sin Œ∏
    `${b}/${c}`,  // cos Œ∏
    `${a}/${b}`   // tan Œ∏
  ];
}

function drawTriangle(a, b, c) {
  const canvas = document.getElementById("triangleCanvas");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.beginPath();
  ctx.moveTo(50,250);        // left bottom
  ctx.lineTo(250,250);       // right bottom
  ctx.lineTo(250,50);        // right top
  ctx.closePath();
  ctx.stroke();

  ctx.font = "16px Arial";
  ctx.fillText(`Opp = ${a}`, 260, 150);
  ctx.fillText(`Adj = ${b}`, 150, 270);
  ctx.fillText(`Hyp = ${c}`, 140, 130);
  ctx.fillText("Œ∏", 45, 245);
}

function normalizeInput(input) {
  let ans = input.trim().toLowerCase();
  ans = ans.replace(/\s+/g, "");

  ans = ans.replace(/‚Åª¬π/g, "^-1");
  ans = ans.replace(/atan|arctan|inversetan/g, "tan^-1");
  ans = ans.replace(/asin|arcsin|inversesin/g, "sin^-1");
  ans = ans.replace(/acos|arccos|inversecos/g, "cos^-1");

  ans = ans.replace(/‚àö\(?([0-9]+)\)?/g, "Math.sqrt($1)");

  return ans;
}

function checkAnswer() {
  const userInput = document.getElementById("answer").value.trim();
  const feedback = document.getElementById("feedback");

  if (!userInput) {
    feedback.textContent = "‚ö†Ô∏è Please enter an answer.";
    feedback.style.color = "orange";
    return;
  }

  // normalize both user input and accepted answers
  const userNorm = normalizeInput(userInput);

  for (let form of acceptedForms) {
    const formNorm = normalizeInput(form);
    try {
      if (userNorm === formNorm) {
        feedback.textContent = "‚úÖ Correct!";
        feedback.style.color = "green";
        return;
      }
      const userVal = eval(userNorm);
      const correctVal = eval(formNorm);
      if (Math.abs(userVal - correctVal) < 0.01) {
        feedback.textContent = "‚úÖ Correct!";
        feedback.style.color = "green";
        return;
      }
    } catch {}
  }

  feedback.textContent = `‚ùå Wrong. Acceptable answers: ${acceptedForms.join(" or ")}`;
  feedback.style.color = "red";
}

function nextQuestion() {
  document.getElementById("answer").value = "";
  document.getElementById("feedback").textContent = "";
  generateQuestion();
}

// drag symbols
document.querySelectorAll('.symbol').forEach(el => {
  el.addEventListener('dragstart', e => {
    e.dataTransfer.setData("text", e.target.textContent);
  });
});
document.getElementById("answer").addEventListener("dragover", e => e.preventDefault());
document.getElementById("answer").addEventListener("drop", e => {
  e.preventDefault();
  const text = e.dataTransfer.getData("text");
  document.getElementById("answer").value += text;
});

// ENTER = submit
document.getElementById("answer").addEventListener("keydown", e => {
  if (e.key === "Enter") checkAnswer();
});

// start
generateQuestion();
</script>

</body>
</html>



